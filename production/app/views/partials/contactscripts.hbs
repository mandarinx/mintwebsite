<link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<script src="//cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script type="text/javascript" src="//maps.stamen.com/js/tile.stamen.js?v1.3.0"></script>

<script>
var map, layer, marker;
function waitForLeaflet() {
    if (window.L && window.L.StamenTileLayer) {
        layer = new L.StamenTileLayer('toner');
        map = L.map('map').setView([data.lat, data.long], 17);
        map.addLayer(layer);
        marker = L.marker([data.lat, data.long]).addTo(map);
        map.doubleClickZoom.disable();
        map.dragging.disable();
        map.touchZoom.disable();
        map.scrollWheelZoom.disable();
        map.keyboard.disable();
    } else {
        window.clearTimeout(timer);
        timer = window.setTimeout(waitForLeaflet, 500);
    }
}
var data = document.getElementById('map').dataset;
var timer = window.setTimeout(waitForLeaflet, 500);
</script>
